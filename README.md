# Flask API 应用模板

## 命名约定

1. 类名：大驼峰式（各单词首字母大写，没有下划线）。如：User，UserInfo
2. 函数名：小驼峰式（第一个单词全小写，其他单词首字母大写，没有下划线）。如：getUserInfo
3. 变量名：全小写，各单词间加下划线。如：user_info
4. 常量名：全大写，各单词间加下划线。如：MYSQL_PASSWORD
5. URL：与变量名相同，且不包含动词

## 目录结构说明

1. main.py 是程序入口文件，flask run 之前要设置环境变量 `FLASK_APP=main.py`
2. config.py 是项目配置文件
3. raw 目录存放一些动态的内容，比如用户上传的头像、商品图片等之类的。
4. `git commit` 时会跳过空目录，raw 目录里的 .gitkeep 文件的作用仅仅是防止 raw 被跳过
5. `app/model.py` 存放所有与数据库相关的代码
6. `app/email.py` 存放所有与邮件相关的代码
7. `app/api` 目录存放所有路由及对应函数

## 其他说明

1. 前端以 POST 方式向后端发送数据时，都以 json 格式发送
2. 用户上传的图片、文件等，应该先计算其 MD5 值，然后将该 MD5 值作为文件名，防止存放时文件名冲突（MD5 是一种消息摘要算法，文件稍有不同，其 MD5 值就不同，所以一个 MD5 值可以唯一标识一个文件），另外，每天的文件最好存在按日期命名的目录里。例如，用户上传一个文件 Avatar.jpg，计算得其 MD5 值为 ef12454sSdfSF454132(胡写的)，将文件改名为 ef12454sSdfSF454132.jpg，存放在 raw 目录中，并将原来的名字 Avatar.jpg 和现在的名字 ef12454sSdfSF454132.jpg 存入数据库（原来的名字一般不会用到，但还是先存起来，以防万一）。当前端需要该图片时，后端直接将其地址返回即可，如 `/raw/2020-02-16/ef12454sSdfSF454132.jpg`
3. `app/api` 目录里的代码最好能根据功能放在不同的文件里，且只放路由，普通函数放在 `common.py` 中。
4. 由于在注册 api 蓝图时，指定了 `url_prefix='/api'`，所以所有 url 都会自动加上 `/api` 前缀。
